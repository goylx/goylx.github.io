<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>搭建本地代码仓库</title>
      <link href="git/local/"/>
      <url>git/local/</url>
      
        <content type="html"><![CDATA[<h2 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h2><div class="note blue"><p>本文默认你对命令行工具有基本的了解，如果你还不知道如何使用请先对命令行工具有基本的了解后继续本文的阅读。</p></div><p>打开命令行工具输入命令<code>git version</code>查看git版本，如果没有安装git参照如下方式：</p><div class="tabs" id="tab-id"><ul class="nav-tabs"><li class="tab active"><a class="#tab-id-1">windows</a></li><li class="tab"><a class="#tab-id-2">linux</a></li><li class="tab"><a class="#tab-id-3">mac</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab-id-1"><p>在 Git 官方网站下载，打开 <a href="http://git-scm.com/download/win">http://git-scm.com/download/win</a> 选择对应版本，下载后双击运行安装程序即可</p></div><div class="tab-pane" id="tab-id-2"><p>如果你想在 Linux 上用二进制安装程序来安装 Git，可以使用发行版包含的基础软件包管理工具来安装。 如果以 Fedora 上为例，你可以使用 yum：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install git</span><br></pre></td></tr></table></figure><p>如果你在基于 Debian 的发行版上，请尝试用 apt-get：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install git</span><br></pre></td></tr></table></figure><p>要了解更多选择，Git 官方网站上有在各种 Unix 风格的系统上安装步骤，网址为 <a href="http://git-scm.com/download/linux%E3%80%82">http://git-scm.com/download/linux。</a></p></div><div class="tab-pane" id="tab-id-3"><p>安装 Xcode Command Line Tools。 Mavericks （10.9） 或更高版本的系统中，在 Terminal 里尝试首次运行 ‘git’ 命令即可。 如果没有安装过命令行开发者工具，将会提示你安装。</p><p>如果你想安装更新的版本，可以使用二进制安装程序。 官方维护的 OSX Git 安装程序可以在 Git 官方网站下载，网址为 <a href="http://git-scm.com/download/mac%E3%80%82">http://git-scm.com/download/mac。</a></p></div></div></div><h2 id="git配置"><a href="#git配置" class="headerlink" title="git配置"></a>git配置</h2><p>Git 可以通过<code>git config</code>命令查看或者定制git的环境信息，环境配置一共有三种作用域</p><ul><li>system: <code>git config --system</code>，配置文件存放在/etc/gitconfig，对于系统所有用户起作用，不常用</li><li>global: <code>git config --global</code>，配置文件存放在~/.gitconfig 或 ~/.config/git/config，只对当前用户起作用，常用</li><li>local : <code>git condif --local </code>，配置文件存放在当前使用仓库的 Git 目录中的 config 文件（就是 .git/config），只针对当前仓库，常用</li></ul><p>查看配置信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --list或-l           <span class="comment">#列出所有配置项，可能会看到重复的变量名，因为 Git 会从不同的文件中读取同一个配置（例如：/etc/gitconfig 与 ~/.gitconfig）。 这种情况下，Git 会使用它找到的每一个变量的最后一个配置。</span></span><br><span class="line">git config --global --list      <span class="comment">#只查看全局的配置</span></span><br><span class="line">git config &lt;key&gt;                <span class="comment">#查看制定配置项的值</span></span><br></pre></td></tr></table></figure><p>配置自定义环境：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name xxxx              <span class="comment">#配置用户名</span></span><br><span class="line">git config --global user.email xxx@xxx.com      <span class="comment">#配置邮箱地址</span></span><br><span class="line">当安装完 Git 应该做的第一件事就是设置你的用户名称与邮件地址。 这样做很重要，因为每一个 Git 的提交都会使用这些信息，并且它会写入到你的每一次提交中</span><br><span class="line">当你想针对特定项目使用不同的用户名称与邮件地址时，可以在那个项目目录下运行没有 git config --<span class="built_in">local</span> user.name xxxx  选项的命令来配置</span><br><span class="line"></span><br><span class="line">git config --global core.editor emacs           <span class="comment">#配置默认的编辑器</span></span><br><span class="line">当 Git 需要你输入信息时会调用它。 如果未配置，Git 会使用操作系统默认的文本编辑器，通常是 Vim。</span><br></pre></td></tr></table></figure><h2 id="获取代码仓库"><a href="#获取代码仓库" class="headerlink" title="获取代码仓库"></a>获取代码仓库</h2><p>有两种取得 Git 项目仓库的方法。 第一种是将现有项目导入到 Git 控制中，或者新建一个Git控制的项目； 第二种是从一个服务器克隆一个现有的 Git 仓库。</p><h3 id="在现有目录中初始化仓库"><a href="#在现有目录中初始化仓库" class="headerlink" title="在现有目录中初始化仓库"></a>在现有目录中初始化仓库</h3><p><code>git init</code>命令创建一个新的 Git 仓库。它用来将已存在但还没有版本控制的项目转换成一个 Git 仓库，或者创建一个空的新仓库。大多数Git命令在未初始化的仓库中都是无法使用的，所以这就是你运行新项目的第一个命令了。运行 <code>git init</code> 命令会在你项目的根目录下创建一个新的 .git 目录，其中包含了你项目必需的所有元数据。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git init                    <span class="comment"># 将当前的目录转换成一个 Git 仓库</span></span><br><span class="line">git init &lt;directory&gt;        <span class="comment"># 在指定目录创建一个空的 Git 仓库。</span></span><br><span class="line">git init --bare &lt;directory&gt; <span class="comment"># 初始化一个裸的 Git 仓库，没有工作目录</span></span><br></pre></td></tr></table></figure><div class="note "><p>使用–bare标记生成一个没有工作目录的裸仓库，用于作为中央仓库，因为向非裸仓库推送分支有可能会覆盖已有的代码变动。应该将裸仓库看做一个存储设施而非开发环境，在客户端的非裸仓库进行开发后推送到中央的裸仓库</p></div><h3 id="克隆已有的仓库"><a href="#克隆已有的仓库" class="headerlink" title="克隆已有的仓库"></a>克隆已有的仓库</h3><p><code>git clone</code>命令拷贝整个 Git 仓库,默认配置下远程 Git 仓库中的每一个文件的每一个版本都将被拉取下来。通常可以使用任何一个克隆下来的用户端来重建服务器上的仓库（虽然可能会丢失某些服务器端的挂钩设置，但是所有版本的数据仍在）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> /home/xxx/git_learing                         <span class="comment"># 从本地/home/xxx/git_learing仓库克隆一份仓库，使用哑协议——不建议</span></span><br><span class="line">git <span class="built_in">clone</span> file:///home/xxx/git_learing                  <span class="comment"># 从本地/home/xxx/git_learing仓库克隆一份仓库，使用智能协议——建议</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/libgit2/libgit2            <span class="comment"># 从github上克隆一份仓库，会在当前目录下创建一个名为libgit2的仓库</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/libgit2/libgit2 mylibgit   <span class="comment"># 将执行与上一个命令相同的操作，不过在本地创建的仓库名字变为mylibgit</span></span><br></pre></td></tr></table></figure><p>Git 支持多种数据传输协议。上面的例子使用的是 https:// 协议，不过你也可以使用 git:// 协议或者使用 SSH 传输协议，比如 user@server:path/to/repo.git 。</p><h2 id="记录每次更新到仓库"><a href="#记录每次更新到仓库" class="headerlink" title="记录每次更新到仓库"></a>记录每次更新到仓库</h2><p>工作目录下的每一个文件都不外乎这两种状态：已跟踪或未跟踪。 <span class='p red'>已跟踪的文件</span>是指那些被纳入了版本控制的文件，在<span class='p red'>上一次快照中有它们的记录</span>，在工作一段时间后，它们的状态可能处于未修改，已修改或已放入暂存区。 工作目录中除已跟踪文件以外的所有其它文件都属于未跟踪文件，它们既不存在于上次快照的记录中，也没有放入暂存区。 初次克隆某个仓库的时候，工作目录中的所有文件都属于已跟踪文件，并处于未修改状态。<br>编辑过某些文件之后，由于自上次提交后你对它们做了修改，Git 将它们标记为已修改文件。 我们逐步将这些修改过的文件放入暂存区，然后提交所有暂存了的修改，如此反复。所以使用 Git 时文件的生命周期如下：</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="/image/Devops/git/lifeCycle.png" class="lazyload" data-srcset="/image/Devops/git/lifeCycle.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="git项目中文件的生命周期"/></div><span class="image-caption">git项目中文件的生命周期</span></div><h3 id="检查当前文件状态"><a href="#检查当前文件状态" class="headerlink" title="检查当前文件状态"></a>检查当前文件状态</h3><p>要查看哪些文件处于什么状态，可以用<code>git status</code>命令。如果在克隆/新建仓库后立即使用此命令，会看到类似这样的输出：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">nothing to commit, working directory clean</span><br></pre></td></tr></table></figure><p>这说明现在的工作目录相当干净。换句话说，所有已跟踪文件在上次提交后都未被更改过。 此外，上面的信息还表明，当前目录下没有出现任何处于未跟踪状态的新文件，否则 Git 会在这里列出来。 最后，该命令还显示了当前所在分支，并告诉你这个分支同远程服务器上对应的分支没有偏离。 现在分支名是master,这是默认的分支名。</p><h3 id="跟踪新文件"><a href="#跟踪新文件" class="headerlink" title="跟踪新文件"></a>跟踪新文件</h3><details green><summary> 查看新建的未被跟踪的文件状态 </summary>              <div class='content'>              <p>如果在项目中新建一个未被跟踪的文件，运行<code>git status</code>命令会看到如下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">&#x27;hello world&#x27;</span> &gt; README</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line"></span><br><span class="line">No commits yet</span><br><span class="line"></span><br><span class="line">Untracked files:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to include <span class="keyword">in</span> what will be committed)</span><br><span class="line">README</span><br><span class="line"></span><br><span class="line">nothing added to commit but untracked files present (use <span class="string">&quot;git add&quot;</span> to track)</span><br><span class="line"></span><br></pre></td></tr></table></figure>              </div>            </details><p>使用命令 <code>git add</code> 开始跟踪一个文件。 所以，要跟踪 README 文件，运行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add README</span><br></pre></td></tr></table></figure><p><code>git add</code>命令使用文件或目录的路径作为参数；如果参数是目录的路径，该命令将递归地跟踪该目录下的所有文件，例如<code>git add .</code>会暂存当前目录下全部文件，<code>git add -a</code>会暂存当前项目全部修改的文件。</p><details green><summary> 查看执行 git add 命令后的文件状态 </summary>              <div class='content'>              <p>此时再运行 git status 命令，会看到 README 文件已被跟踪，并处于暂存状态：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line"></span><br><span class="line">No commits yet</span><br><span class="line"></span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git rm --cached &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line">new file:   README</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>只要在 Changes to be committed 这行下面的，就说明是已暂存状态。如果此时使用<code>git commit</code>命令提交，那么该文件此时此刻的版本将被留存在历史记录中。</p>              </div>            </details><h3 id="提交更新"><a href="#提交更新" class="headerlink" title="提交更新"></a>提交更新</h3><p>使用<code>git commit</code>命令将<span class='p red'>暂存区</span>的内容做一次提交，保存为一份快照。在此之前，请一定要确认还有什么修改过的或新建的文件还没有<code>git add</code>过，否则提交的时候不会记录这些还没暂存起来的变化。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m <span class="string">&#x27;add README&#x27;</span>                <span class="comment"># -m 参数指定本次提交的说明信息</span></span><br><span class="line">[master (root-commit) 48a8482] add README   <span class="comment"># 显示提交到的分支（master），本次提交索引的校验和（48a8482）</span></span><br><span class="line"> 1 file changed, 1 insertion(+)             <span class="comment"># 显示一个文件被修改，添加了一行内容</span></span><br><span class="line"> create mode 100644 README</span><br></pre></td></tr></table></figure><div class="note "><p>git commit本身只会提交暂存区的内容，没有使用git add命令暂存的修改不会被提交，可以使用git commit -am 提交的说明信息命令跳过暂存区直接将工作区的已经被纳入跟踪的文件进行提交，相当于执行了 git add -a 和 git commit -m 两条命令</p></div><h3 id="暂存已修改文件"><a href="#暂存已修改文件" class="headerlink" title="暂存已修改文件"></a>暂存已修改文件</h3><p>如果修改了一个已经保存被提交（<code>git commit</code>）的文件，运行<code>git status</code>命令会看到如下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">&#x27;change content&#x27;</span> &gt;&gt; README</span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git restore &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line">modified:   README</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br></pre></td></tr></table></figure><p>文件<code>README</code>出现在 Changes not staged for commit 这行下面，说明已跟踪文件的内容发生了变化，但还没有放到暂存区。 要暂存这次更新，需要运行 <code>git add</code>命令。 这是个多功能命令：可以用它开始跟踪新文件，或者把已跟踪的文件放到暂存区，还能用于合并时把有冲突的文件标记为已解决状态等。 将这个命令理解为“添加内容到下一次提交中”而不是“将一个文件添加到项目中”要更加合适。运行<code>git add</code>将README放到暂存区，然后再看看<code>git status</code>的输出：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git restore --staged &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line">modified:   README</span><br></pre></td></tr></table></figure><h3 id="比较文件详细差异"><a href="#比较文件详细差异" class="headerlink" title="比较文件详细差异"></a>比较文件详细差异</h3><ul><li><p>查看工作区文件和暂存区文件差异</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git diff README</span><br><span class="line">diff --git a/README b/README</span><br><span class="line">index 325b5ab..557db03 100644</span><br><span class="line">--- a/README</span><br><span class="line">+++ b/README</span><br><span class="line">@@ -1,2 +1 @@</span><br><span class="line"> Hello World</span><br><span class="line">-change content</span><br></pre></td></tr></table></figure></li><li><p>查看暂存区和上一次提交的文件差异</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git add .</span><br><span class="line">$ git diff --staged                  <span class="comment"># 或者使用git diff --cached</span></span><br><span class="line">diff --git a/README b/README</span><br><span class="line">index 557db03..0835e4f 100644</span><br><span class="line">--- a/README</span><br><span class="line">+++ b/README</span><br><span class="line">@@ -1 +1 @@</span><br><span class="line">-Hello World</span><br><span class="line">+change</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h3 id="移除文件"><a href="#移除文件" class="headerlink" title="移除文件"></a>移除文件</h3><p>在工作目录删除文件后，需要将删除修改暂存到暂存区然后再进行提交才能从已跟踪清单中移除。</p><details green><summary> 从工作目录删除文件后查看文件状态 </summary>              <div class='content'>              <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git status</span><br><span class="line">On branch master</span><br><span class="line">Changes not staged <span class="keyword">for</span> commit:</span><br><span class="line">  (use <span class="string">&quot;git add/rm &lt;file&gt;...&quot;</span> to update what will be committed)</span><br><span class="line">  (use <span class="string">&quot;git restore &lt;file&gt;...&quot;</span> to discard changes <span class="keyword">in</span> working directory)</span><br><span class="line">deleted:    README</span><br><span class="line"></span><br><span class="line">no changes added to commit (use <span class="string">&quot;git add&quot;</span> and/or <span class="string">&quot;git commit -a&quot;</span>)</span><br></pre></td></tr></table></figure><p>此时显示删除修改没有被暂存，下次提交的快照记录中不会删除文件，此时可以使用git add 或者git rm将删除修改保存到暂存区。</p>              </div>            </details><p>使用<code>git rm &lt;file&gt;</code>命令可以将文件从工作区删除并将删除修改保存到暂存区</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git rm README </span><br><span class="line">rm <span class="string">&#x27;README&#x27;</span></span><br><span class="line">$ git status</span><br><span class="line">On branch master</span><br><span class="line">Changes to be committed:</span><br><span class="line">  (use <span class="string">&quot;git restore --staged &lt;file&gt;...&quot;</span> to unstage)</span><br><span class="line">deleted:    README</span><br></pre></td></tr></table></figure><div class="note "><p>如果删除的文件被修改并保存到了暂存区，需要使用-f选项强制删除</p></div><div class="note "><p>如果只想删除暂存区的文件保留工作目录下的文件，需要使用–cached选项</p></div><h3 id="移动文件"><a href="#移动文件" class="headerlink" title="移动文件"></a>移动文件</h3><p>和移除文件类似，在工作目录移动文件后需要将修改暂存才能在下次提交中被提交，可以使用<code>git mv &lt;file&gt;</code>命令移动工作区文件并暂存移动修改，等价于如下命令集合: </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mv README.md README</span><br><span class="line">$ git rm README.md</span><br><span class="line">$ git add README</span><br></pre></td></tr></table></figure><h2 id="回滚修改"><a href="#回滚修改" class="headerlink" title="回滚修改"></a>回滚修改</h2><h3 id="撤销工作区的变更"><a href="#撤销工作区的变更" class="headerlink" title="撤销工作区的变更"></a>撤销工作区的变更</h3><ul><li>将工作区的文件回退到和暂存区一致：<ul><li><code>git checkout -- &lt;file&gt;</code>：旧版本</li><li><code>git restore [--worktree] &lt;file&gt;</code></li></ul></li><li>取消暂存的文件：<ul><li><code>git reset [HEAD] [&lt;file&gt;]</code>:旧版本，如果指定文件则取消全部暂存</li><li><code>git restore --staged &lt;file&gt;</code></li></ul></li><li>取消暂存的文件同时更改工作目录中的文件（将指定文件从暂存区中移除并将工作目录中的文件回退到上一次提交的版本）：<ul><li><code>git reset --hard [HEAD]</code>:旧版本，只能全部重置不能指定某个文件</li><li><code>git restore --staged --worktree &lt;file&gt;</code><div class="note "><p>两种回滚的方式都可以指定回退到那一次提交的版本，git reset –hard <commit_id>或git restore –staged [–worktree] –source=<commit_id></p></div></li></ul></li></ul><div class="note danger"><p>git reset 不仅会将文件回退到之前的版本甚至会清除指定提交版本之后的提交历史记录，永远不要重置为已经提交到公共仓库</p></div>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git及版本控制</title>
      <link href="git/concept/"/>
      <url>git/concept/</url>
      
        <content type="html"><![CDATA[<h2 id="关于版本控制"><a href="#关于版本控制" class="headerlink" title="关于版本控制"></a>关于版本控制</h2><p>版本控制用于记录一个或多个文件内容变更，以方便将来查询修订情况。使用版本控制就可以将某个文件回溯到之前的状态，甚至将整个项目都回退到过去某个时间点的状态，你可以比较文件的变化细节，查出最后是谁修改了哪个地方，从而找出导致怪异问题出现的原因，又是谁在何时报告了某个功能缺陷等等。<br>目前基本都是使用分布式版本控制系统，每个客户端都保存一份完整的仓库镜像，并通过中心服务器保持每个镜像之间同步。这类系统都可以指定和若干不同的远端代码仓库进行交互。籍此，你就可以在同一个项目中，分别和不同工作小组的人相互协作。 你可以根据需要设定不同的协作流程，比如层次模型式的工作流。</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="/image/Devops/git/versionControl.png" class="lazyload" data-srcset="/image/Devops/git/versionControl.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="分布式版本控制系统"/></div><span class="image-caption">分布式版本控制系统</span></div><h2 id="git基础"><a href="#git基础" class="headerlink" title="git基础"></a>git基础</h2><ul><li>分布式版本控制<br>git作为一种分布式版本控制系统。在每一个客户端都持有一份完整的仓库镜像，因此近乎所有的操作都可以直接在本地执行。举个例子，要浏览项目的历史，Git 不需外连到服务器去获取历史，然后再显示出来——它只需直接从本地数据库中读取。 你能立即看到项目历史。 如果你想查看当前版本与一个月前的版本之间引入的修改，Git 会查找到一个月前的文件做一次本地的差异计算，而不是由远程服务器处理或从远程服务器拉回旧版本文件再来本地处理。</li><li>存储版本的方式<br>git把不同版本的文件作为小型文件系统的一组快照，每次提交或保存一个新的版本时将当时的全部文件制作为一份快照并保存这份快照的索引，为了高效，如果文件没有修改，Git 不再重新存储该文件，而是只保留一个链接指向之前存储的文件。 Git 对待数据更像是一个 快照流。<div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="/image/Devops/git/snapshots.png" class="lazyload" data-srcset="/image/Devops/git/snapshots.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="存储项目版本为快照流"/></div><span class="image-caption">存储项目版本为快照流</span></div></li><li>保证数据完整性<br>git在存储数据前会根据文件内容以及文件的目录生成一个散列hash值，Git 数据库中保存的信息都是以文件内容的哈希值来索引。任何文件的改动都会被git监测到， 这意味着不可能在 Git 不知情时更改任何文件内容或目录内容。</li></ul><h3 id="文件的四种状态"><a href="#文件的四种状态" class="headerlink" title="文件的四种状态"></a>文件的四种状态</h3><p>处于git管理下的文件一共有四种状态，已修改（modified）、已暂存（staged）、已提交（committed）、已推送（pushed）。 已修改表示修改了文件，但还没保存到数据库中。 已暂存表示对一个已修改文件的当前版本做了标记，使之包含在下次提交的快照中。已提交表示数据已经安全的保存在本地数据库中。已推送表示已经将本地仓库中的快照保存到本地远程仓库且推送到远程仓库中。由此引入 Git 项目的三个工作区域的概念：Git 仓库、工作目录以及暂存区域。</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="/image/Devops/git/zone.png" class="lazyload" data-srcset="/image/Devops/git/zone.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="git项目的五个工作区域，本地远程仓库相当于远程仓库的镜像每次fetch/pull/push都会和远程仓库保持一致"/></div><span class="image-caption">git项目的五个工作区域，本地远程仓库相当于远程仓库的镜像每次fetch/pull/push都会和远程仓库保持一致</span></div><ul><li>Git 仓库目录是 Git 用来保存项目的元数据和对象数据库的地方。 这是 Git 中最重要的部分，从其它计算机克隆仓库时，拷贝的就是这里的数据。</li><li>工作目录是对项目的某个版本独立提取出来的内容。 这些从 Git 仓库的压缩数据库中提取出来的文件，放在磁盘上供你使用或修改。</li><li>暂存区域是一个文件，保存了下次将提交的文件列表信息，一般在 Git 仓库目录中。 有时候也被称作``索引’’，不过一般说法还是叫暂存区域。</li></ul><p>基本的 Git 工作流程如下：</p><ol><li>在工作目录中修改文件。</li><li>暂存文件，将文件的快照放入暂存区域。</li><li>提交更新，找到暂存区域的文件，将快照永久性存储到 Git 仓库目录。</li></ol>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客提交搜索引擎收录并进行seo优化</title>
      <link href="HexoSeo/"/>
      <url>HexoSeo/</url>
      
        <content type="html"><![CDATA[<p>让百度和谷歌的搜索引擎收录博客</p><span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>网站在没有提交搜索引擎收录之前，直接搜索你网站的内容是搜不到的，只有提交搜索引擎之后，搜索引擎才能收录你的站点，通过爬虫抓取你网站的东西，对于 hexo 博客来说，如果你是部署在 GitHub Pages，那么你是无法被百度收录的，因为 GitHub 禁止了百度爬虫，另外百度收录的所需的时间较长，大约半个月左右才会看到效果！</p><p class='p blue'>我们可以输入 site:域名 来查看域名是否被搜索引擎收录</p><h2 id="1-添加百度收录"><a href="#1-添加百度收录" class="headerlink" title="1. 添加百度收录"></a>1. 添加百度收录</h2><h3 id="1-1-注册网站"><a href="#1-1-注册网站" class="headerlink" title="1.1 注册网站"></a>1.1 注册网站</h3><p>访问百度搜索资源平台官网，注册或者登陆百度账号，依次选择【用户中心】-【站点管理】，添加你的网站</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="/image/hexo/baiduSearchAdd.png" class="lazyload" data-srcset="/image/hexo/baiduSearchAdd.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="添加网站"/></div><span class="image-caption">添加网站</span></div><p>点击保存后会让你选择协议头（http 或者 https），如果选择 https，它会验证你的站点，大约能在一天之内完成。</p><p class='p red'>注意：百度网站添加的域名要和_config.yml中的url相同</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="/image/hexo/baiduSearchUrl.png" class="lazyload" data-srcset="/image/hexo/baiduSearchUrl.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"/></div></div><p>之后会让你验证网站所有权，提供三种验证方式：</p><ul><li>文件验证：下载给定的文件，将其放到本地主题目录 source 文件夹，然后部署上去完成验证</li><li>HTML 标签验证：一般是给一个 meta 标签，放到首页 <head> 与 </head> 标签之间即可完成验证</li><li>CNAME 验证：个人觉得这种方法最简单，去域名 DNS 添加一个 CNAME 记录即可完成验证</li></ul><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="/image/hexo/baiduSearchcheck.png" class="lazyload" data-srcset="/image/hexo/baiduSearchcheck.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="通过添加CNAME解析记录验证网站"/></div><span class="image-caption">通过添加CNAME解析记录验证网站</span></div><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="/image/hexo/aliCname.png" class="lazyload" data-srcset="/image/hexo/aliCname.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="阿里云域名服务添加Cname解析"/></div><span class="image-caption">阿里云域名服务添加Cname解析</span></div><h3 id="1-2-提交百度搜索"><a href="#1-2-提交百度搜索" class="headerlink" title="1.2 提交百度搜索"></a>1.2 提交百度搜索</h3><p>百度提供了自动提交和手动提交两种方式，其中自动提交又分为主动推送、自动推送和 sitemap 三种方式，以下是官方给出的解释：</p><ul><li>主动推送：最为快速的提交方式，推荐您将站点当天新产出链接立即通过此方式推送给百度，以保证新链接可以及时被百度收录</li><li>自动推送：是轻量级链接提交组件，将自动推送的 JS 代码放置在站点每一个页面源代码中，当页面被访问时，页面链接会自动推送给百度，有利于新页面更快被百度发现</li><li>sitemap：您可以定期将网站链接放到sitemap中，然后将sitemap提交给百度。百度会周期性的抓取检查您提交的sitemap，对其中的链接进行处理，但收录速度慢于主动推送</li><li>手动提交：如果您不想通过程序提交，那么可以采用此种方式，手动将链接提交给百度</li></ul><p><strong>四种提交方式对比：</strong></p><table><thead><tr><th>方式</th><th>主动推送</th><th>自动推送</th><th>Sitemap</th><th>手动提交</th></tr></thead><tbody><tr><td>速度</td><td>最快</td><td>——</td><td>——</td><td>——</td></tr><tr><td>开发成本</td><td>高</td><td>低</td><td>中</td><td>不需开发</td></tr><tr><td>可提交量</td><td>低</td><td>高</td><td>高</td><td>低</td></tr><tr><td>是否建议提交历史连接</td><td>否</td><td>是</td><td>是</td><td>是</td></tr><tr><td>和其他提交方法是否有冲突</td><td>无</td><td>无</td><td>无</td><td>无</td></tr></tbody></table><p><strong>个人推荐同时使用主动推送和 sitemap 方式</strong>，下面将逐一介绍这四种提交方式的具体实现方法</p><h4 id="1-2-1-主动推送"><a href="#1-2-1-主动推送" class="headerlink" title="1.2.1 主动推送"></a>1.2.1 主动推送</h4><p>在博客根目录安装插件<code>npm install hexo-baidu-url-submit --save</code>，然后在根目录 _config.yml 文件里写入以下配置：</p><figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidu_url_submit:</span></span><br><span class="line">  <span class="attr">count:</span> <span class="number">1</span>               <span class="comment"># 提交最新的多少个链接</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">xxxxxxxxxxxxx</span>    <span class="comment"># 在百度站长平台中添加的域名</span></span><br><span class="line">  <span class="attr">token:</span> <span class="string">your_token</span>      <span class="comment"># 密钥</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">baidu_urls.txt</span>   <span class="comment"># 文本文档的地址， 新链接会保存在此文本文档里</span></span><br></pre></td></tr></table></figure><p>其中密钥可以在/资源提交/普通收录/API提交中中看到，接口调用地址最后面 token=xxxxx 即为你的密钥</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="/image/hexo/baiduSearchToken.png" class="lazyload" data-srcset="/image/hexo/baiduSearchToken.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="百度主动推送的密钥"/></div><span class="image-caption">百度主动推送的密钥</span></div><p>最后添加新的deployer进行主动推送</p><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">https://github.com/goylx/goylx.github.io.git</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">gh-pages</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">git@e.coding.net:oylx2021/blog/blog.git</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">gh-pages</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">https://gitee.com/oylxgl/blog.git</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">gh-pages</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">type:</span> <span class="string">baidu_url_submitter</span>                         <span class="comment"># 这是新加的主动推送</span></span><br></pre></td></tr></table></figure><p>最后执行<code>npx hexo g -d</code>部署一遍即可实现主动推送，推送成功的标志是：在执行部署命令最后会显示类似如下代码:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://www.guluo.icu/HexoSeo/</span><br><span class="line">&#123;&quot;remain&quot;:2953,&quot;success&quot;:47&#125;</span><br></pre></td></tr></table></figure><p>这表示有 47 个页面已经主动推送成功，remain 的意思是当天剩余的可推送 url 条数</p><h4 id="1-2-2-sitemap推送"><a href="#1-2-2-sitemap推送" class="headerlink" title="1.2.2 sitemap推送"></a>1.2.2 sitemap推送</h4><p>首先需要安装生成站点地图的插件，<code>npm install hexo-generator-sitemap --save</code>、<code>npm install hexo-generator-baidu-sitemap --save</code>。<br>然后使用命令 hexo g -d 将网站部署上去，然后访问 你的首页/sitemap.xml 或者 你的首页/baidusitemap.xml 就可以看到网站地图了<br>其中 sitemap.xml 文件是搜索引擎通用的 sitemap 文件，baidusitemap.xml 是百度专用的 sitemap 文件</p><p>然后来到百度站长平台的 sitemap 提交页面，将你的 sitemap 地址提交即可，如果成功的话状态会显示为正常，初次提交要等几分钟，sitemap.xml 相比 baidusitemap.xml 来说等待时间也会更长，如果以后你博客有新的文章或其他页面，可以点击手动更新文件，更新一下新的 sitemap</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="/image/hexo/baiduSearchSitemap.png" class="lazyload" data-srcset="/image/hexo/baiduSearchSitemap.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="百度主动推送的密钥"/></div><span class="image-caption">百度主动推送的密钥</span></div><h4 id="1-2-3-手动推送"><a href="#1-2-3-手动推送" class="headerlink" title="1.2.3 手动推送"></a>1.2.3 手动推送</h4><p>手动提交不需要其他额外操作，直接把需要收录的页面的 url 提交即可，这种方法效率较低，更新较慢，不推荐使用</p><h2 id="2-提交谷歌收录"><a href="#2-提交谷歌收录" class="headerlink" title="2 提交谷歌收录"></a>2 提交谷歌收录</h2><p>接下来我们将网站提交谷歌搜索引擎搜索，进入<a href="https://search.google.com/search-console">谷歌站长平台</a>，登录你的谷歌账号之后会让你验证网站所有权:</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="/image/hexo/googleSearchAdd.png" class="lazyload" data-srcset="/image/hexo/googleSearchAdd.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="google搜索添加网站资源"/></div><span class="image-caption">google搜索添加网站资源</span></div><p>有两种验证方式，分别是网域和网址前缀，选择网域资源验证方式比较好，只需要一个域名就可以匹配到多种格式的 URL，之后会给你一个 TXT 的记录值，复制它到你域名 DNS 增加一个 TXT 记录，点击验证即可。</p><h2 id="3-seo优化"><a href="#3-seo优化" class="headerlink" title="3 seo优化"></a>3 seo优化</h2><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">seo:</span></span><br><span class="line">  <span class="comment"># When there are no keywords in the article&#x27;s front-matter, use tags as keywords.</span></span><br><span class="line">  <span class="attr">use_tags_as_keywords:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># When there is no description in the article&#x27;s front-matter, use excerpt as the description.</span></span><br><span class="line">  <span class="attr">use_excerpt_as_description:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">robots:</span></span><br><span class="line">    <span class="attr">home_first_page:</span> <span class="string">index,follow</span></span><br><span class="line">    <span class="attr">home_other_pages:</span> <span class="string">noindex,follow</span></span><br><span class="line">    <span class="attr">archive:</span> <span class="string">noindex,follow</span></span><br><span class="line">    <span class="attr">category:</span> <span class="string">noindex,follow</span></span><br><span class="line">    <span class="attr">tag:</span> <span class="string">noindex,follow</span></span><br><span class="line">    <span class="comment"># robots can be written in front-matter                     # 这是新加的主动推送</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客优化及主题配置</title>
      <link href="HexoOptimize/"/>
      <url>HexoOptimize/</url>
      
        <content type="html"><![CDATA[<p>使用volantis主题，并进行一些自定义配置和优化</p><span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>这篇文章主要介绍Hexo的基本使用以及一些优化配置，如果还没有搭建起博客并托管至Github Pages请点<a href="">这里</a><br>本文基于volantis主题，部分配置可能不同请查看相应主题的官方文档自行配置。</p><h2 id="1-基础配置"><a href="#1-基础配置" class="headerlink" title="1.基础配置"></a>1.基础配置</h2><ol><li>网站信息<figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">title:</span>              <span class="comment"># 网站标题</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&#x27;&#x27;</span>        <span class="comment"># 副标题</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&#x27;&#x27;</span>     <span class="comment"># 描述信息</span></span><br><span class="line"><span class="attr">keywords:</span>           <span class="comment"># 关键字</span></span><br><span class="line"><span class="attr">author:</span>             <span class="comment"># 作者</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh</span>        <span class="comment"># 语言</span></span><br></pre></td></tr></table></figure></li><li>网址信息<figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">url</span>                 <span class="comment"># 网址根路径</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:title/</span>  <span class="comment"># 文章生成的永久链接格式</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="2-配置主题"><a href="#2-配置主题" class="headerlink" title="2.配置主题"></a>2.配置主题</h2><p><a href="https://volantis.js.org/v5/getting-started/">volantis官方文档</a></p><ol><li>修改配置文件<br>在hexo的配置文件_config.yml中找到theme属性并修改。<figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">volantis</span></span><br></pre></td></tr></table></figure></li><li>下载主题<br>在终端中输入：<code>npm i hexo-theme-volantis</code></li><li>创建主题配置文件<br>在根目录下创建文件<code>_config.volantis.yml</code>,volantis主题相关配置写在该文件内。<div class="note "><p>PS: 基于hexo5的新特性</p></div>主题有关的样式配置请查看主题的官方文档进行配置，本文只对部分内容进行介绍。volantis官方文档<a href="https://volantis.js.org/v5/theme-settings/">传送门</a></li></ol><h2 id="3-页面配置"><a href="#3-页面配置" class="headerlink" title="3.页面配置"></a>3.页面配置</h2><h3 id="3-1归档页面"><a href="#3-1归档页面" class="headerlink" title="3.1归档页面"></a>3.1归档页面</h3><p>hexo默认会根据<code>/source/_posts</code>下的文件生成归档页面，默认存放在<code>archives</code>目录，可以在<code>_config.yml</code>文件中修改</p><h3 id="3-2关于页面"><a href="#3-2关于页面" class="headerlink" title="3.2关于页面"></a>3.2关于页面</h3><p>创建一个介绍的独立页面，创建<code>/source/about/index.md</code>或者直接使用命令<code>hexo hexo new about</code>。</p><figure class="highlight md"><figcaption><span>source/about/index.md</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: docs            # 页面布局</span><br><span class="line">seo<span class="emphasis">_title: 关于</span></span><br><span class="line"><span class="emphasis">bottom_</span>meta: false</span><br><span class="line">sidebar: []             # 侧边栏要显示的部件</span><br><span class="line">valine:</span><br><span class="line"><span class="section">  placeholder:        # 评论系统的占位字符</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line">  下面写关于自己的内容</span><br></pre></td></tr></table></figure><h3 id="3-3分类页面"><a href="#3-3分类页面" class="headerlink" title="3.3分类页面"></a>3.3分类页面</h3><p>创建一个文章分类的独立页面，会读取文章的<a href="https://volantis.js.org/v5/page-settings/#front-matter">front-matter</a>中的category的内容自动生成分类页面。创建<code>/source/categories/index.md</code>或者直接使用命令<code>npx hexo new categories</code></p><figure class="highlight md"><figcaption><span>source/categories/index.md</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: category</span><br><span class="line">index: true</span><br><span class="line"><span class="section">title: 所有分类</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><h3 id="3-4标签页面"><a href="#3-4标签页面" class="headerlink" title="3.4标签页面"></a>3.4标签页面</h3><p>创建一个存放所有文章标签的独立页面，会读取会读取文章的<a href="https://volantis.js.org/v5/page-settings/#front-matter">front-matter</a>中的tag的内容自动生成标签页面。创建<code>/source/tags/index.md</code>或者直接使用命令<code>npx hexo new tags</code></p><figure class="highlight md"><figcaption><span>source/tags/index.md</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: tag</span><br><span class="line">index: true</span><br><span class="line"><span class="section">title: 所有标签</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><h3 id="3-5友链页面"><a href="#3-5友链页面" class="headerlink" title="3.5友链页面"></a>3.5友链页面</h3><h4 id="3-5-1创建页面"><a href="#3-5-1创建页面" class="headerlink" title="3.5.1创建页面"></a>3.5.1创建页面</h4><p>创建一个存放所有推荐网站链接的独立页面,创建<code>/source/friends/index.md</code>或者直接使用命令<code>npx hexo new friends</code></p><figure class="highlight md"><figcaption><span>source/friends/index.md</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">layout: friends # 必须</span><br><span class="line"><span class="section">title: 我的朋友们 # 可选，这是友链页的标题</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line">这里写友链上方的内容。</span><br><span class="line">&lt;!-- more --&gt;</span><br><span class="line">这里可以写友链页面下方的文字备注，例如自己的友链规范、示例等。</span><br></pre></td></tr></table></figure><h4 id="3-5-2选择布局方案"><a href="#3-5-2选择布局方案" class="headerlink" title="3.5.2选择布局方案"></a>3.5.2选择布局方案</h4><p>在主题配置文件中配置<code>pages.friends.layout_scheme</code>属性</p><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pages:</span></span><br><span class="line">    <span class="comment"># 友链页面配置</span></span><br><span class="line">    <span class="attr">friends:</span></span><br><span class="line">    <span class="attr">layout_scheme:</span> <span class="string">traditional</span> <span class="comment"># simple: 简单布局, traditional: 传统布局,  sites: 网站卡片布局</span></span><br></pre></td></tr></table></figure><h4 id="3-5-3设置数据源"><a href="#3-5-3设置数据源" class="headerlink" title="3.5.3设置数据源"></a>3.5.3设置数据源</h4><div class="tabs" id="blog"><ul class="nav-tabs"><li class="tab active"><a class="#blog-1">静态数据源</a></li><li class="tab"><a class="#blog-2">动态数据源</a></li></ul><div class="tab-content"><div class="tab-pane active" id="blog-1"><p>新建文件<code>/source/_data/friends.yml</code>，内容格式如下：</p><figure class="highlight yaml"><figcaption><span>/source/_data/friends.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">group:</span> <span class="comment"># 分组标题</span></span><br><span class="line">  <span class="attr">description:</span>  <span class="comment"># 分组描述</span></span><br><span class="line">  <span class="attr">items:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="attr">title:</span> <span class="comment"># 名称</span></span><br><span class="line">     <span class="attr">avatar:</span> <span class="comment"># 头像</span></span><br><span class="line">     <span class="attr">url:</span> <span class="comment"># 链接</span></span><br><span class="line">     <span class="attr">screenshot:</span> <span class="comment"># 截图</span></span><br><span class="line">     <span class="attr">keywords:</span> <span class="comment"># 关键词</span></span><br><span class="line">     <span class="attr">description:</span> <span class="comment"># 描述</span></span><br><span class="line">   <span class="bullet">-</span> <span class="attr">title:</span> <span class="comment"># 名称</span></span><br><span class="line">     <span class="attr">avatar:</span> <span class="comment"># 头像</span></span><br><span class="line">     <span class="attr">url:</span> <span class="comment"># 链接</span></span><br><span class="line">     <span class="attr">screenshot:</span> <span class="comment"># 截图</span></span><br><span class="line">     <span class="attr">keywords:</span> <span class="comment"># 关键词</span></span><br><span class="line">     <span class="attr">description:</span> <span class="comment"># 描述</span></span><br></pre></td></tr></table></figure></div><div class="tab-pane" id="blog-2"><p>后期补充</p></div></div></div><h3 id="3-6-404页面"><a href="#3-6-404页面" class="headerlink" title="3.6 404页面"></a>3.6 404页面</h3><p>创建一个在路径出错时显示的独立页面，创建<code>/source/404.md</code></p><figure class="highlight md"><figcaption><span>source/404.md</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">cover: true</span><br><span class="line">robots: noindex,nofollow</span><br><span class="line">sitemap: false</span><br><span class="line">seo<span class="emphasis">_title: 404 Not Found</span></span><br><span class="line"><span class="emphasis">bottom_</span>meta: false</span><br><span class="line">sidebar: []</span><br><span class="line">valine:</span><br><span class="line">  path: /404.html</span><br><span class="line"><span class="section">  placeholder: 请留言告诉我您要访问哪个页面找不到了</span></span><br><span class="line"><span class="section">---</span></span><br><span class="line">  输出的内容</span><br></pre></td></tr></table></figure><p>可以自定义更多独立页面，满足更多个性化需求。在source目录下新建文件夹，并新建<code>/source/example/index.md</code>就可以自定义独立页面。</p><h2 id="4-常用的功能插件"><a href="#4-常用的功能插件" class="headerlink" title="4.常用的功能插件"></a>4.常用的功能插件</h2><p>本文介绍一些常用插件的安装及配置，详情请查看<a href="https://volantis.js.org/v5/theme-settings/#%E7%AC%AC%E4%B8%89%E6%96%B9%E6%8F%92%E4%BB%B6">主题官网</a></p><h3 id="4-1字数和阅读时间统计"><a href="#4-1字数和阅读时间统计" class="headerlink" title="4.1字数和阅读时间统计"></a>4.1字数和阅读时间统计</h3><p>终端输入命令<code>npm install hexo-wordcount --save</code>安装插件，在主题配置文件中配置文章布局。</p><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">article:</span></span><br><span class="line">    <span class="attr">top_meta:</span> [<span class="string">···</span>,<span class="string">wordcount</span>] <span class="comment"># 文章头部显示的元信息</span></span><br><span class="line">    <span class="attr">meta_library:</span> <span class="comment"># 元信息库</span></span><br><span class="line">      <span class="string">···</span></span><br><span class="line">      <span class="attr">wordcount:</span></span><br><span class="line">        <span class="attr">icon_wordcount:</span> <span class="string">fas</span> <span class="string">fa-keyboard</span></span><br><span class="line">        <span class="attr">icon_duration:</span> <span class="string">fas</span> <span class="string">fa-hourglass-half</span></span><br></pre></td></tr></table></figure><p>在主题配置文件中开启字数统计插件</p><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugins:</span></span><br><span class="line">    <span class="string">···</span></span><br><span class="line">    <span class="string">wordcount</span></span><br><span class="line">        <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="4-2站内搜索功能"><a href="#4-2站内搜索功能" class="headerlink" title="4.2站内搜索功能"></a>4.2站内搜索功能</h3><p>默认配置为 Hexo 搜索，但是需要安装插件才能使用：<code>npm i -S hexo-generator-search hexo-generator-json-content</code></p><figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">service:</span> <span class="string">hexo</span>  <span class="comment"># hexo, google, algolia, azure, baidu</span></span><br><span class="line">  <span class="attr">js:</span> <span class="string">https://cdn.jsdelivr.net/gh/volantis-x/cdn-volantis@2.6.4/js/search.js</span></span><br></pre></td></tr></table></figure><h3 id="4-3相关文章功能"><a href="#4-3相关文章功能" class="headerlink" title="4.3相关文章功能"></a>4.3相关文章功能</h3><p>安装插件：<code>npm i -S hexo-related-popular-posts</code>，如果您使用了头图，可以在站点配置文件中添加以下设置来让相关文章显示正确的文章头图：</p><figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">popularPosts:</span></span><br><span class="line">  <span class="attr">eyeCatchImageAttributeName:</span> <span class="string">headimg</span></span><br></pre></td></tr></table></figure><p>更多自定义配置请查看官方文档</p><div class="tag link"><a class="link-card" title="hexo-related-popular-posts" href="https://github.com/tea3/hexo-related-popular-posts"><div class="left"><img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets@master/logo/256/safari.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets@master/logo/256/safari.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="/></div><div class="right"><p class="text">hexo-related-popular-posts</p><p class="url">https://github.com/tea3/hexo-related-popular-posts</p></div></a></div><p class='p center logo large red'>未完待续</p><h2 id="5-统计分析网站访问量"><a href="#5-统计分析网站访问量" class="headerlink" title="5.统计分析网站访问量"></a>5.统计分析网站访问量</h2><h3 id="5-1-百度统计"><a href="#5-1-百度统计" class="headerlink" title="5.1 百度统计"></a>5.1 百度统计</h3><p>百度统计主要用于分析网站数据：流量、访客量等。</p><ol><li>注册百度统计账号，官网链接：<a href="https://tongji.baidu.com/">https://tongji.baidu.com</a></li><li>点击<code>管理&gt;新增网站</code><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="/image/hexo/baiduAdd.png" class="lazyload" data-srcset="/image/hexo/baiduAdd.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="添加百度统计分析的网站"/></div><span class="image-caption">添加百度统计分析的网站</span></div>填写数据后点击确定后会跳转到代码获取页面</li><li>复制代码中的key并在配置文件设置<div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="/image/hexo/baiduKey.png" class="lazyload" data-srcset="/image/hexo/baiduKey.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="添加百度统计分析的网站"/></div><span class="image-caption">添加百度统计分析的网站</span></div><figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidu_analytics_key:</span> <span class="string">百度统计的key</span></span><br></pre></td></tr></table></figure></li></ol><p>可以在管理页面查看代码是否安装正确，然后就可以查看网页访问的报告了。</p><h3 id="5-2-google统计"><a href="#5-2-google统计" class="headerlink" title="5.2 google统计"></a>5.2 google统计</h3><p>google统计和百度统计类似，主要满足国外流量的统计。注册google统计账号，官网链接：<a href="https://analytics.google.com/%E3%80%82%E5%A4%8D%E5%88%B6key%E5%B9%B6%E5%9C%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E9%85%8D%E7%BD%AE">https://analytics.google.com/。复制key并在配置文件中配置</a></p><figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">google_analytics_key:</span> <span class="string">谷歌统计的key</span></span><br></pre></td></tr></table></figure><div class="note "><p>可以将<code>&lt;script async src=https://www.googletagmanager.com/gtag/js?id=xxxxxxxx&gt;&lt;/script&gt;</code>src引入的文件下载放在本地，已加快速度。</p></div><p>将上面的代码在配置文件中引入即可</p><h3 id="5-3-leancloud统计页面访问次数"><a href="#5-3-leancloud统计页面访问次数" class="headerlink" title="5.3 leancloud统计页面访问次数"></a>5.3 leancloud统计页面访问次数</h3><h4 id="5-3-1-创建leancloud服务"><a href="#5-3-1-创建leancloud服务" class="headerlink" title="5.3.1 创建leancloud服务"></a>5.3.1 创建leancloud服务</h4><ol><li>进入官网 <a href="https://leancloud.cn/%EF%BC%8C%E6%B3%A8%E5%86%8C%E8%B4%A6%E5%8F%B7%E9%AA%8C%E8%AF%81%E9%82%AE%E7%AE%B1">https://leancloud.cn/，注册账号验证邮箱</a></li><li>进入控制台创建应用，名称随意后期可以修改，选择开发版即可</li></ol><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="/image/hexo/leancloudCreate.png" class="lazyload" data-srcset="/image/hexo/leancloudCreate.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="创建leancloud应用"/></div><span class="image-caption">创建leancloud应用</span></div><ol start="3"><li>创建 Class：点击刚创建的应用，选择数据存储/结构化数据，创建一个 Class 表用来保存我们的博客访问数据。<ul><li>此处创建的 Class 名字必须为 Counter，用来保证与 NexT 主题的修改相兼容；</li><li>ACL 权限选择 无限制，避免后续因为权限的问题导致次数统计显示不正常</li></ul></li></ol>  <div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="/image/hexo/leancloudClass.png" class="lazyload" data-srcset="/image/hexo/leancloudClass.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="创建Counter Class表"/></div><span class="image-caption">创建Counter Class表</span></div><ol start="4"><li>创建 Class 完成之后，新创建的 Counter 表会显示在左侧，这时再切换到应用的 设置 - 应用 Key 界面复制app_key和和app_id</li></ol><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="/image/hexo/leancloudKey.png" class="lazyload" data-srcset="/image/hexo/leancloudKey.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="图3 复制app_key、app_id"/></div><span class="image-caption">图3 复制app_key、app_id</span></div><ol start="5"><li>修改主题配置文件：<figure class="highlight yaml"><figcaption><span>_config.volantis.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">analytics:</span></span><br><span class="line">  <span class="attr">leancloud:</span> <span class="comment"># 请使用自己的 id &amp; key 以防止数据丢失</span></span><br><span class="line">    <span class="attr">app_id:</span> </span><br><span class="line">    <span class="attr">app_key:</span> </span><br><span class="line">    <span class="attr">custom_api_server:</span> <span class="comment"># 国际版一般不需要写，除非自定义了 API Server</span></span><br></pre></td></tr></table></figure></li></ol><p>这时再使用 hexo g、hexo d 命令重新部署博客，就可以正常使用文章阅读量统计的功能了，如下图所示：</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="/image/hexo/leancloudResult.png" class="lazyload" data-srcset="/image/hexo/leancloudResult.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="查看文章阅读量"/></div><span class="image-caption">查看文章阅读量</span></div><p class='p red'>记录文章访问量的唯一标识符是文章的发布日期和文章的标题，因此要确保这两个数值组合的唯一性，如果你更改了这两个数值，会造成文章阅读数值的清零重计。</p><h2 id="6-提高博客访问速度"><a href="#6-提高博客访问速度" class="headerlink" title="6.提高博客访问速度"></a>6.提高博客访问速度</h2><h3 id="6-1hexo-offline-popup插件"><a href="#6-1hexo-offline-popup插件" class="headerlink" title="6.1hexo-offline-popup插件"></a>6.1hexo-offline-popup插件</h3><p>hexo-offline-popup 是一个 hexo 插件， 它可加速你的Hexo网站的加载速度，以及网站内容更新弹窗提示<br>在Hexo根目录打开Git-bash ，执行命令<code>npm i hexo-offline-popup --save</code><br>在博客根目录的_config.yml中添加如下配置</p><figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># offline config passed to sw-precache.</span></span><br><span class="line"><span class="attr">service_worker:</span></span><br><span class="line">  <span class="attr">maximumFileSizeToCacheInBytes:</span> <span class="number">5242880</span></span><br><span class="line">  <span class="attr">staticFileGlobs:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">public/**/*.&#123;js,html,css,png,jpg,gif,svg,eot,ttf,woff,woff2&#125;</span></span><br><span class="line">  <span class="attr">stripPrefix:</span> <span class="string">public</span></span><br><span class="line">  <span class="attr">verbose:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>如果你有CDN资源，例：<br>    - <a href="https://unpkg.com/artitalk">https://unpkg.com/artitalk</a><br>    - <a href="https://cdn.jsdelivr.net/npm/artitalk">https://cdn.jsdelivr.net/npm/artitalk</a><br>将此配置添加到根目录的_config.yml</p><figure class="highlight yaml"><figcaption><span>_config.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">service_worker:</span></span><br><span class="line">  <span class="attr">runtimeCaching:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">urlPattern:</span> <span class="string">/*</span>  <span class="comment"># 子路径（接受通配符）</span></span><br><span class="line">      <span class="attr">handler:</span> <span class="string">cacheFirst</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">origin:</span> <span class="string">unpkg.com</span>  <span class="comment"># 域名</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">urlPattern:</span> <span class="string">/npm/*</span>   <span class="comment"># 子路径（接受通配符）</span></span><br><span class="line">      <span class="attr">handler:</span> <span class="string">cacheFirst</span></span><br><span class="line">      <span class="attr">options:</span></span><br><span class="line">        <span class="attr">origin:</span> <span class="string">cdn.jsdelivr.net</span>  <span class="comment"># 域名</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> volantis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Github Pages 和Hexo搭建自己的独立博客</title>
      <link href="HexoBlog/"/>
      <url>HexoBlog/</url>
      
        <content type="html"><![CDATA[<p>这篇文章主要介绍如何使用hexo搭建静态博客网站并通过github page提供服务</p><span id="more"></span><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><div class="note message blue"><p>首先感谢你阅读我的博客：<a href="https://guluo.icu/">OYLX’S BLOG</a></p></div><p>这是一篇有关如何使用<a href="https://hexo.io/zh-cn/">Hexo</a>搭建博客，并通过<a href="https://pages.github.com/">Github Pages</a>服务部署上线的详细教程。本人是软件工程专业本科生，目前大三下学期在企业顶岗实习，主要学习java后端技术以及部分前端知识，这是搭建好博客后写得第一篇博客。借这个机会记录一下搭建博客的整体流程，希望能够帮助你更快搭建好自己的独立博客。</p><h2 id="1-基本概述"><a href="#1-基本概述" class="headerlink" title="1.基本概述"></a>1.基本概述</h2><div class="note link green"><p><a href="https://pages.github.com/">Github Pages</a></p></div><p>Github Pages是github提供的静态网站托管服务，使用Github Pages可以为你提供一个免费的服务器以及一个绑定的域名，通过该域名可以直接访问托管的静态网页。</p><div class="note link green"><p><a href="https://hexo.io/zh-cn/">Hexo</a></p></div><p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 <a href="http://daringfireball.net/projects/markdown/">Markdown</a>（或其他渲染引擎）解析文章，并根据指定的主题生成静态网页，在存储位置上可以有：<code>Github Page、OSS 对象存储、云主机</code>等多种选择。</p><h2 id="2-环境准备"><a href="#2-环境准备" class="headerlink" title="2.环境准备"></a>2.环境准备</h2><h3 id="2-1Node-js"><a href="#2-1Node-js" class="headerlink" title="2.1Node.js"></a>2.1Node.js</h3><p>NodeJs是Hexo的运行时环境，版本需不低于10.13，建议使用Node.js12.0及以上版本，可以通过在命令行中键入<code>node -v</code>命令查看当前系统Node版本。</p><details green><summary> 安装Node.js </summary>              <div class='content'>              <p>点击前往<a href="https://nodejs.org/zh-cn/download/">node下载地址</a></p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://cdn.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A02/02.jpg" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/TRHX/ImageHosting/ITRHX-PIC/A02/02.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="图1 node官方下载页面"/></div><span class="image-caption">图1 node官方下载页面</span></div><p>根据你的系统选择不同的安装方式</p><div class="tabs" id="tab-id"><ul class="nav-tabs"><li class="tab active"><a class="#tab-id-1">windows</a></li><li class="tab"><a class="#tab-id-2">linux</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab-id-1"><p>按需下载相应版本，如果选择.msi(安装程序)则默认安装即可。如果选择.zip压缩包，解压后还需要<a href="https://m.html.cn/qa/node-js/11835.html">配置系统变量</a>。</p></div><div class="tab-pane" id="tab-id-2"><details cyan open><summary> 官网下载.tar.gz二进制包 </summary>              <div class='content'>              <p>按需下载相应版本，打开命令行输入下列命令可以安装node并查看版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar xzvf  node-v10.9.0-linux-x64.tar.xz// 解压</span><br><span class="line"><span class="built_in">cd</span> node-v10.9.0-linux-x64/// 进入解压目录</span><br><span class="line">./bin/node -v// 查看版本</span><br><span class="line">sudo mv node-v10.9.0-linus-x64 /usr/<span class="built_in">local</span>/nodejs// 移动到/usr/<span class="built_in">local</span></span><br></pre></td></tr></table></figure><p>解压文件的 bin 目录底下包含了 node、npm 等命令，我们可以使用 ln 命令来设置软连接使得可以在任何路径下执行node和npm命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/<span class="built_in">local</span>/nodejs/bin/npm   /usr/<span class="built_in">local</span>/bin/ </span><br><span class="line">ln -s /usr/<span class="built_in">local</span>/nodejs/bin/node   /usr/<span class="built_in">local</span>/bin/</span><br></pre></td></tr></table></figure>              </div>            </details><details cyan><summary> Ubuntu apt-get命令安装 </summary>              <div class='content'>              <p>打开命令行执行下列命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nodejs// 安装nodejs</span><br><span class="line">sudo apt-get install npm// 安装npm</span><br><span class="line">node -v// 查看node版本</span><br></pre></td></tr></table></figure>              </div>            </details></div></div></div>              </div>            </details><details cyan open><summary> 升级nodejs版本 </summary>              <div class='content'>              <p>打开命令行工具执行下列命令可以升级nodejs和npm的版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm -v// 查看npm版本</span><br><span class="line">sudo npm install -g npm@7.7.6// 升级npm版本</span><br><span class="line">sudo npm install -g n// 安装n模块</span><br><span class="line">n latest// 安装最新版noden stable//安装最新稳定版</span><br></pre></td></tr></table></figure><div class="note gray"><p>如果是使用从官网下载的二进制包安装的node也可以直接删除目录，重新在官网下载新版本。 如果是windows安装程序安装可以直接从卸载程序卸载并重新安装</p></div><details gray><summary> ubutun下使用apt升级nodejs版本 </summary>              <div class='content'>              <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get remove nodejs// 卸载nodejs</span><br><span class="line">sudo apt-get remove npm// 卸载npm</span><br><span class="line">然后重新从官网下载.tar.gz安装</span><br><span class="line"><span class="comment"># 自动升级版本（不一定最新）</span></span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get upgrade</span><br></pre></td></tr></table></figure>              </div>            </details>              </div>            </details><h3 id="2-2Git"><a href="#2-2Git" class="headerlink" title="2.2Git"></a>2.2Git</h3><p>Git 是一个开源的分布式版本控制系统，用于将自己本地的项目和github仓库绑定，从而可以通过命令一键上传自己更新的文件，通过<code>git --version</code>命令查看git版本确定是否安装git。（windows用户可以点击鼠标右键，如果有<code>Git Bash Here</code>则已安装Bash）</p><ul><li>Windows：下载并安装 <a href="https://git-scm.com/download/win">git</a>.</li><li>Mac：使用 <a href="http://mxcl.github.com/homebrew/">Homebrew</a>, <a href="http://www.macports.org/">MacPorts</a> 或者下载 <a href="http://sourceforge.net/projects/git-osx-installer/">安装程序</a>。</li><li>Linux (Ubuntu, Debian)：<code>sudo apt-get install git-core</code></li><li>Linux (Fedora, Red Hat, CentOS)：<code>sudo yum install git-core</code></li></ul><h2 id="3-Hexo基本使用"><a href="#3-Hexo基本使用" class="headerlink" title="3.Hexo基本使用"></a>3.Hexo基本使用</h2><h3 id="3-1安装hexo"><a href="#3-1安装hexo" class="headerlink" title="3.1安装hexo"></a>3.1安装hexo</h3><p>新建一个文件夹放置博客相关文件，然后在这个文件夹下打开命令行工具，windows用户可以在该文件夹下右键鼠标，点击<span class='p red'>Git Bash Here</span>，输入以下 npm 命令即可安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli// 全局安装hexo</span><br><span class="line"><span class="comment"># 如果熟悉npm的用户可以仅在局部安装hexo  // npm install hexo</span></span><br></pre></td></tr></table></figure><div class="note "><p>npm默认从外网下载数据，国内可能速度较慢可以使用如下方式提高速度</p></div><details cyan><summary> 加快npm install速度 </summary>              <div class='content'>              <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 更换下载的镜像源</span></span><br><span class="line">npm --registry https://registry.npm.taobao.org install 模块 //临时更换，每次执行install都需要指定镜像源</span><br><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org //持久更换镜像源</span><br><span class="line"><span class="comment"># 配置后可通过下面方式来验证是否成功</span></span><br><span class="line"><span class="comment"># npm config get registry，使用npm config set registry https://registry.npmjs.org可以恢复原来的设置</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用cnpm下载，所有使用npm执行的install命令用cnpm替换，例如cnpm installl hexo</span></span><br><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>              </div>            </details><p>安装完成后如果是全局安装则可以在任何位置使用<code>npx hexo &lt;command&gt;</code>，局部安装则只能在安装目录下使用<code>npx hexo &lt;command&gt;</code>。如果希望可以直接使用<code>hexo &lt;command&gt;</code>则需要将Hexo所在目录下的 <code>node_modules</code> 添加到环境变量之中。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># linux系统下可以在Hexo安装目录使用如下命令（局部安装，全局安装不用配置）</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;PATH=&quot;$PATH:./node_modules/.bin&quot;&#x27;</span> &gt;&gt; ~/.profile</span><br><span class="line"><span class="comment"># windows系统会将Hexo默认安装在C:\Users\你的电脑名称\AppData\Roaming\npm\node_modules\ </span></span><br><span class="line">只需要将C:\Users\你的电脑名称\AppData\Roaming\npm\node_modules\.bin配置到系统变量path即可</span><br></pre></td></tr></table></figure><h3 id="3-2Hexo的一些常用命令"><a href="#3-2Hexo的一些常用命令" class="headerlink" title="3.2Hexo的一些常用命令"></a>3.2Hexo的一些常用命令</h3><p>这部分内容以 Hexo 官方文档为准，;这里记录一些最常用的。传送门：<a href="https://hexo.io/zh-cn/docs/commands" title="hexo 命令">命令 | Hexo</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npx hexo init           <span class="comment"># 初始化博客</span></span><br><span class="line">npx hexo server         <span class="comment"># 启动本地的hexo服务</span></span><br><span class="line">npx hexo clean          <span class="comment"># 清空本地缓存即public目录</span></span><br><span class="line">npx hexo deploy         <span class="comment"># 使用hexo-deployer-xxx插件部署博客</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3-3初始化博客"><a href="#3-3初始化博客" class="headerlink" title="3.3初始化博客"></a>3.3初始化博客</h3><p>执行<code>npx hexo init blog</code>命令可以在当前路径下生成一个blog的文件夹安装初始化的hexo博客，<code>ubutun</code>系统上出现以下效果表示初始化成功。</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/init.jpg" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/init.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="图2 初始化命令执行结果"/></div><span class="image-caption">图2 初始化命令执行结果</span></div><div class="note gray"><p>上述命令需要从github（外网）上获取数据（<code>git clone</code>），可能会由于网络问题导致初始化失败，可以手动进行初始化</p></div><details cyan><summary> 手动初始化hexo </summary>              <div class='content'>              <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://gitee.com/oylxgl/hexo-starter.git// 从我的站点克隆一份博客</span><br><span class="line"><span class="built_in">cd</span> hexo-starter// 进入克隆出来的文件夹</span><br><span class="line">npm install --save// 安装依赖</span><br><span class="line">npx hexo server // 启动服务</span><br></pre></td></tr></table></figure>              </div>            </details><p>如果执行<code>npx hexo init</code>则会在当前目录下生成初始化的博客。Hexo 安装完成后，将会在指定文件夹中新建所需要的文件，Hexo 文件夹下的目录如下：</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/initfolder.jpg" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/initfolder.jpg" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"/></div></div><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── _config.yml            # 网站配置文件</span><br><span class="line">├── .gitignore             # Git 忽略文件</span><br><span class="line">├── node_modules           # 插件安装目录</span><br><span class="line">├── package.json           # 描述插件</span><br><span class="line">├── package-lock.json      # 描述插件 更详细</span><br><span class="line">├── scaffolds              # 模板</span><br><span class="line">├── source                 # 资源</span><br><span class="line">└── themes                 # 主题</span><br></pre></td></tr></table></figure><p>执行以下命令，执行完即可使用浏览器打开 <a href="http://localhost:4000/">http://localhost:4000/</a> 查看效果</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx hexo server//启动服务</span><br></pre></td></tr></table></figure><div class="note blue"><p>显示以下信息说明操作成功</p></div><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INFO Hexo is running at http://0.0.0.0:4000/. Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure><p>浏览器打开 <a href="http://localhost:4000/">http://localhost:4000/</a> 查看效果：</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/initLocal.jpg,alt = 图4 初始化的博客主页" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/initLocal.jpg,alt = 图4 初始化的博客主页" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="image"/></div></div><h3 id="3-4网站配置"><a href="#3-4网站配置" class="headerlink" title="3.4网站配置"></a>3.4网站配置</h3><p>网站 配置文件：<code>_config.yml</code> ，官方配置文档传送门：<a href="https://hexo.io/zh-cn/docs/configuration">配置 | Hexo</a></p><p>一般来说在该配置文件中只需要修改一些网站基本属性，下面记录一下指定主题和设置发布（部署）对象。</p><h4 id="3-4-1修改主题类型"><a href="#3-4-1修改主题类型" class="headerlink" title="3.4.1修改主题类型"></a>3.4.1修改主题类型</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">主题名</span></span><br></pre></td></tr></table></figure><h4 id="3-4-2配置部署信息"><a href="#3-4-2配置部署信息" class="headerlink" title="3.4.2配置部署信息"></a>3.4.2配置部署信息</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="comment">## 需要使用hexo-deployer-xxx插件，可以部署到多个地址</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span>   <span class="comment">#使用的部署工具</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">git@github.com:xxxx/xxxxx</span>   <span class="comment">#部署到的仓库地址</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">master</span>    <span class="comment">#部署到的分支</span></span><br></pre></td></tr></table></figure><h4 id="3-4-3忽略解析指定的文件"><a href="#3-4-3忽略解析指定的文件" class="headerlink" title="3.4.3忽略解析指定的文件"></a>3.4.3忽略解析指定的文件</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Directory</span></span><br><span class="line"><span class="comment"># 忽略解析指定文件：比如 Github 仓库的 ReadMe.md 文件。</span></span><br><span class="line"><span class="attr">skip_render:</span> <span class="string">README.md</span></span><br></pre></td></tr></table></figure><div class="note "><p>PS：一些插件的属性设置也是在这个文件中配置的。</p></div><h3 id="3-5编写博客"><a href="#3-5编写博客" class="headerlink" title="3.5编写博客"></a>3.5编写博客</h3><p>hexo会自动解析source文件夹下的文件并生成静态网站，可以直接将写好的md文件拖入到<code>/source/_posts</code>下就可以生成一篇新文章。<br>你可以执行下列命令来创建一篇新文章或者新的页面。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">npx</span> <span class="string">hexo</span> <span class="string">new</span> [<span class="string">layout</span>] <span class="string">&lt;title&gt;</span></span><br></pre></td></tr></table></figure><p>您可以在命令中指定文章的布局（layout），默认为 post(一篇新文章)，可以通过修改 _config.yml 中的 default_layout 参数来指定默认布局。</p><h2 id="4-部署到Github-Pages"><a href="#4-部署到Github-Pages" class="headerlink" title="4.部署到Github Pages"></a>4.部署到Github Pages</h2><p>一、注册Github账号：<a href="https://github.com/">点击此处</a>访问 Github 官网，点击 Sign Up 注册账户</p><p>二、创建项目代码库：点击 New repository 开始创建，步骤及注意事项见图。</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/repo.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/repo.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="图5 创建github仓库"/></div><span class="image-caption">图5 创建github仓库</span></div><p>如果你希望你的博客能通过 <code>&lt;你的 GitHub 用户名&gt;.github.io</code> 域名访问，你的 repository 应该直接命名为 <code>&lt;你的 GitHub 用户名&gt;.github.io</code>否则需要通过 <code>&lt;你的 GitHub 用户名&gt;.github.io/&lt;仓库名&gt;</code> 访问。</p><p>三、将本地的 Hexo 博客文件夹推送到 repository 中。默认情况下不应该 <code>public</code> 目录将不会被推送到 repository 中，你应该检查 <code>.gitignore</code> 文件中是否包含 <code>public</code> 一行，如果没有请加上。</p><blockquote><p>注意<code>.gitignore</code>文件为隐藏文件，建议使用vscode打开<code>npx hexo init </code>生成的文件夹编辑</p></blockquote><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/repo1.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/repo1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="图6 生成的仓库"/></div><span class="image-caption">图6 生成的仓库</span></div><p>在本地的博客文件夹下面打开命令行，依次执行以下命令即可完成推送：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">git init    // 初始化版本库</span><br><span class="line"></span><br><span class="line">git add .   // 添加文件到版本库（只是添加到缓存区），.代表添加文件夹下所有文件 </span><br><span class="line"></span><br><span class="line">git commit -m <span class="string">&quot;first commit&quot;</span> // 把添加的文件提交到版本库，并填写提交备注</span><br><span class="line"></span><br><span class="line">git remote add origin 上图获取远程仓库地址  // 把本地库与远程库关联</span><br><span class="line"><span class="comment"># 如果提示error: 远程 origin 已经存在，git remote rm origin</span></span><br><span class="line"></span><br><span class="line">git pull origin main --allow-unrelated-histories </span><br><span class="line"></span><br><span class="line">git push -u origin main    // 第一次推送时</span><br><span class="line"></span><br><span class="line"><span class="comment"># git push origin main  // 第一次推送后，直接使用该命令即可推送修改</span></span><br></pre></td></tr></table></figure><p>四、在github仓库页面点击setting，开启pages服务</p><div class="img-wrap"><div class="img-bg"><img class="img lazyload" src="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/pages.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/pages.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" alt="图6设置pages服务"/></div><span class="image-caption">图6设置pages服务</span></div><p>五、使用<code>hexo-deployer-git</code>一键部署</p><ol><li><p>安装<code>hexo-deployer-git</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></li><li><p>编辑本地Hexo博客文件夹下的<code>_config.yml</code>，找到display属性如下修改：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">&#x27;git&#x27;</span></span><br><span class="line">  <span class="attr">repo:</span> </span><br><span class="line">    <span class="attr">github:</span> <span class="string">github仓库的地址</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span> <span class="comment"># 希望部署到的分支，即上图中选择的仓库托管分支</span></span><br></pre></td></tr></table></figure></li><li><p>执行命令<code>npx hexo deploy --generate</code>即可一键部署服务</p></li></ol><p>然后可以在浏览器中访问上图中<code>Your site is published at</code>后面的域名即可看到你的独立博客。上述只会把生成的静态页面保存到github仓库中，如果你希望将源文件也由github存储，并且每次只需要将修改的源代码推送就可以自动部署，请添加travis服务。</p><details cyan><summary> 添加travis服务 </summary>              <div class='content'>              <p>这里我们将会使用 <a href="https://travis-ci.com/">Travis CI</a> 将 Hexo 博客部署到 GitHub Pages 上。Travis CI 对于开源 repository 是免费的，但是这意味着你希望分享你的博客配置。</p><p>四、添加Travis CI服务</p><p><strong>Travis：</strong></p><ul><li>Travis CI 提供的是持续集成服务。它绑定 GitHub 上的项目，只要有新代码更新，它就会自动抓取。然后，提供一个运行环境，执行测试，完成构建，部署到服务器</li><li>持续集成指的是只要代码有变更，就自动运行构建和测试，反馈运行结果。确保符合预期之后，再将新代码集成到主干</li><li>持续集成的好处在于，每次代码的小幅变更，就能看到运行结果，从而不断累计小的变更，而不是在开发周期结束时，一次合并很多代码</li><li>Travis CI 只支持 GitHub，所以必须要有一个 Git 账号</li><li>该账号下面有一个项目，里面有可运行的代码，还包括构建或测试脚本</li><li>需要激活一个仓库，Travis 会监听这个仓库的所有变化</li></ul><p>第一步，开启Travis监控仓库变更，即本地推送源码</p><p>打开 Travis 官网<a href="https://www.travis-ci.org/%EF%BC%8C%E4%BD%BF%E7%94%A8github%E8%B4%A6%E5%8F%B7%E7%99%BB%E9%99%86%E3%80%82%E5%9C%A8%E5%B7%A6%E4%BE%A7%E5%AF%BC%E8%88%AA%E6%A0%8F%E6%B7%BB%E5%8A%A0%E9%9C%80%E8%A6%81%E4%BD%BF%E7%94%A8Travis">https://www.travis-ci.org/，使用github账号登陆。在左侧导航栏添加需要使用Travis</a> CI服务的仓库。</p><p><img src="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/travis.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/travis.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="></p><p>添加成功后可以在左侧查看添加的仓库，并前往github配置travis权限。</p><p><img src="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/travs1.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/travs1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="></p><p>你应该会被重定向到 Travis CI 的页面。如果没有，请 <a href="https://travis-ci.com/">手动前往</a>。</p><p>在浏览器新建一个标签页，前往 GitHub <a href="https://github.com/settings/tokens">新建 Personal Access Token</a>，只勾选 <code>repo</code> 的权限并生成一个新的 Token。Token 生成后请复制并保存好。<div class="note red"><p>生成token后关闭页面则无法在查看，注意保存好token</p></div></p><p><img src="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/token.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/token.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="></p><p>回到 Travis CI，在左侧导航栏点击仓库后在右侧选中<code>More options</code>然后打开settings，在 <strong>Environment Variables</strong> 下新建一个环境变量，<strong>Name</strong> 为 <code>GH_TOKEN</code>，<strong>Value</strong> 为刚才你在 GitHub 生成的 Token。确保 <strong>DISPLAY VALUE IN BUILD LOG</strong> 保持 <strong>不被勾选</strong> 避免你的 Token 泄漏。点击 <strong>Add</strong> 保存。</p><p><img src="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/token1.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/token1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="></p><p>在本地 博客文件夹中新建一个 <code>.travis.yml</code> 文件：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sudo:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">node_js:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="number">14</span> <span class="comment"># use nodejs v10 LTS</span></span><br><span class="line"><span class="attr">cache:</span> <span class="string">npm</span></span><br><span class="line"><span class="attr">branches:</span></span><br><span class="line">  <span class="attr">only:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">main</span> <span class="comment"># build main branch only</span></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">generate</span> <span class="comment"># generate static files</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">provider:</span> <span class="string">pages</span></span><br><span class="line">  <span class="attr">skip-cleanup:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">github-token:</span> <span class="string">$GH_TOKEN</span></span><br><span class="line">  <span class="attr">keep-history:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">on:</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">main</span></span><br><span class="line">  <span class="attr">local-dir:</span> <span class="string">public</span></span><br></pre></td></tr></table></figure><p>将 <code>.travis.yml</code> 推送到 repository 中。Travis CI 应该会自动开始运行，并将生成的文件推送到同一 repository 下的 <code>gh-pages</code> 分支下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&#x27;开启travis CI服务&#x27;</span></span><br><span class="line">git push origin main</span><br></pre></td></tr></table></figure><p>等待一段时间应该可以在github仓库下看到多出了一个命名为<code>gh-pages</code>的分支</p><p><img src="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/ghpages.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/ghpages.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="></p><p>第二步修改本地Hexo博客文件夹下的<code>_config.yml</code>文件的deploy属性：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">&#x27;git&#x27;</span></span><br><span class="line">  <span class="attr">repo:</span> </span><br><span class="line">    <span class="attr">github:</span> <span class="string">https://github.com/oylx-maker/oylx-maker.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">gh-pages</span>    <span class="comment">#使用一键部署到travis的分支</span></span><br></pre></td></tr></table></figure><p>第三步修改Github pages监听的分支为<code>gh-pages</code>，在github仓库中点击settings找到Github Pages修改。</p><p><img src="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/pages1.png" class="lazyload" data-srcset="https://cdn.jsdelivr.net/gh/oylx-maker/CDN@0.2/hexo/pages1.png" srcset="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII="></p><p>第四步修改本地文件后推送到main分支，等待一段时间后访问即可看到更改后的效果</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&#x27;注释信息&#x27;</span></span><br><span class="line">git push origin main</span><br></pre></td></tr></table></figure>              </div>            </details><p>至此博客搭建以及基本使用已经全部介绍完毕，但还需要进行一些配置才能更好的使用博客，请移步<a href="./">hexo优化和个性化配置</a></p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
